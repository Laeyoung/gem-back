# Gem Back - Integration Testing Guide

v0.4.0 ì¶œì‹œ ì „ ì‹¤ì œ ìœ ì € ê´€ì ì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ í†µí•© í…ŒìŠ¤íŠ¸ í™˜ê²½ì…ë‹ˆë‹¤.

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
test-integration/
â”œâ”€â”€ commonjs-test/       # CommonJS í™˜ê²½ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ esm-test/           # ESM í™˜ê²½ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ typescript-test/    # TypeScript í™˜ê²½ í…ŒìŠ¤íŠ¸
â”œâ”€â”€ TEST_SCENARIOS.md   # ìƒì„¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
â””â”€â”€ README.md           # ì´ íŒŒì¼
```

## ğŸ¯ ëª©ì 

ì‹¤ì œ ì‚¬ìš©ìê°€ npmì—ì„œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤:

1. **íŒ¨í‚¤ì§€ ë¬´ê²°ì„±**: npm packìœ¼ë¡œ ìƒì„±ëœ ì‹¤ì œ ë°°í¬ íŒŒì¼ í…ŒìŠ¤íŠ¸
2. **ëª¨ë“ˆ í˜¸í™˜ì„±**: CommonJS, ESM, TypeScript ëª¨ë‘ì—ì„œ ì •ìƒ ë™ì‘ í™•ì¸
3. **íƒ€ì… ì•ˆì •ì„±**: TypeScript íƒ€ì… ì •ì˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸
4. **ê¸°ëŠ¥ ì™„ì „ì„±**: ëª¨ë“  ê¸°ëŠ¥ì´ ì‹¤ì œ ì‚¬ìš© í™˜ê²½ì—ì„œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. íŒ¨í‚¤ì§€ ë¹Œë“œ

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ:

```bash
npm run build
npm pack
```

ì´ë ‡ê²Œ í•˜ë©´ `gemback-0.4.0.tgz` íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.

### 2. ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ (API í‚¤ ì—†ì´)

```bash
# ëª¨ë“  í™˜ê²½ì—ì„œ êµ¬ì¡° í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./run-all-tests.sh
```

ë˜ëŠ” ê°œë³„ì ìœ¼ë¡œ:

```bash
# CommonJS í…ŒìŠ¤íŠ¸
cd commonjs-test
npm install
npm install ../../gemback-0.4.0.tgz
npm test

# ESM í…ŒìŠ¤íŠ¸
cd ../esm-test
npm install
npm install ../../gemback-0.4.0.tgz
npm test

# TypeScript í…ŒìŠ¤íŠ¸
cd ../typescript-test
npm install
npm install ../../gemback-0.4.0.tgz
npm test
```

### 3. ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (API í‚¤ í•„ìš”)

```bash
# API í‚¤ ì„¤ì •
export GEMINI_API_KEY=your_api_key_here

# ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
cd commonjs-test && npm run test:all
cd ../esm-test && npm run test:all
cd ../typescript-test && npm run test:all
```

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ì¢…ë¥˜

### ê¸°ë³¸ í…ŒìŠ¤íŠ¸ (API í‚¤ ë¶ˆí•„ìš”)

ê° í™˜ê²½ì—ì„œ ë‹¤ìŒì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤:

- âœ… íŒ¨í‚¤ì§€ ë¡œë”©
- âœ… í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤í™”
- âœ… ë©”ì„œë“œ ì¡´ì¬ í™•ì¸
- âœ… íƒ€ì… ì²´í¬ (TypeScript)
- âœ… ì—ëŸ¬ í•¸ë“¤ë§

### ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (API í‚¤ í•„ìš”)

ì‹¤ì œ API í˜¸ì¶œì„ í¬í•¨í•œ ëª¨ë“  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸:

#### Phase 1 ê¸°ëŠ¥
- âœ… ê¸°ë³¸ í…ìŠ¤íŠ¸ ìƒì„±
- âœ… Streaming ì‘ë‹µ
- âœ… Chat ì¸í„°í˜ì´ìŠ¤
- âœ… Fallback ë™ì‘
- âœ… Retry ë¡œì§
- âœ… í†µê³„ ìˆ˜ì§‘

#### Phase 2 ê¸°ëŠ¥
- âœ… Multi-key rotation
- âœ… Round-robin ì „ëµ
- âœ… Least-used ì „ëµ
- âœ… Rate limit tracking
- âœ… Health monitoring
- âœ… Predictive warnings

#### Phase 3 ê¸°ëŠ¥ (v0.3.0+)
- âœ… Multimodal ì§€ì› (ì´ë¯¸ì§€, ì˜¤ë””ì˜¤, ë¹„ë””ì˜¤)
- âœ… `generateContent()` ì§€ì›
- âœ… `generateContentStream()` ì§€ì›
- âœ… SDK ë§ˆì´ê·¸ë ˆì´ì…˜ ë° í´ë¼ì´ì–¸íŠ¸ ìºì‹± (v0.4.0)

## ğŸ” ê° í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ëª…

### CommonJS Test

**ëŒ€ìƒ ì‚¬ìš©ì**: Node.js ê¸°ë³¸ í™˜ê²½, ë ˆê±°ì‹œ í”„ë¡œì íŠ¸

**í…ŒìŠ¤íŠ¸ ë‚´ìš©**:
- `require()` êµ¬ë¬¸ìœ¼ë¡œ ë¡œë”©
- CommonJS ëª¨ë“ˆ ì‹œìŠ¤í…œ í˜¸í™˜ì„±
- `package.json`ì˜ `main` í•„ë“œ ê²€ì¦

**íŒŒì¼**:
- `index.js`: ê¸°ë³¸ êµ¬ì¡° í…ŒìŠ¤íŠ¸
- `test-all-features.js`: ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### ESM Test

**ëŒ€ìƒ ì‚¬ìš©ì**: ìµœì‹  Node.js í”„ë¡œì íŠ¸, í”„ë¡ íŠ¸ì—”ë“œ ë²ˆë“¤ëŸ¬ ì‚¬ìš©ì

**í…ŒìŠ¤íŠ¸ ë‚´ìš©**:
- `import` êµ¬ë¬¸ìœ¼ë¡œ ë¡œë”©
- ESM ëª¨ë“ˆ ì‹œìŠ¤í…œ í˜¸í™˜ì„±
- `package.json`ì˜ `module` í•„ë“œ ê²€ì¦
- Tree-shaking ê°€ëŠ¥ì„±

**íŒŒì¼**:
- `index.mjs`: ê¸°ë³¸ êµ¬ì¡° í…ŒìŠ¤íŠ¸
- `test-all-features.mjs`: ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### TypeScript Test

**ëŒ€ìƒ ì‚¬ìš©ì**: TypeScript í”„ë¡œì íŠ¸ ê°œë°œì

**í…ŒìŠ¤íŠ¸ ë‚´ìš©**:
- TypeScript ì»´íŒŒì¼ ì„±ê³µ
- íƒ€ì… ì •ì˜ íŒŒì¼ (`.d.ts`) ì •í™•ì„±
- íƒ€ì… ì¶”ë¡  ë™ì‘
- Strict ëª¨ë“œ í˜¸í™˜ì„±
- IDE ìë™ì™„ì„±

**íŒŒì¼**:
- `src/index.ts`: ê¸°ë³¸ íƒ€ì… ì•ˆì •ì„± í…ŒìŠ¤íŠ¸
- `src/test-all-features.ts`: ì „ì²´ ê¸°ëŠ¥ íƒ€ì… ì•ˆì •ì„± í…ŒìŠ¤íŠ¸

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ í•´ì„

### âœ… ì„±ê³µ ì¼€ì´ìŠ¤

```
=== CommonJS Integration Test ===

âœ… Import test passed - gemback is correctly loaded in CommonJS
âœ… Client instantiation successful
âœ… Type checking: client is object
âœ… Methods available: generate, generateStream, chat, generateContent, generateContentStream, getFallbackStats
```

### âŒ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ ì˜ˆì‹œ

```
âŒ Failed to create client: Cannot find module 'gemback'
```

ì´ëŸ° ê²½ìš°:
1. `npm install ../../gemback-0.4.0.tgz` ì‹¤í–‰í–ˆëŠ”ì§€ í™•ì¸
2. `package.json`ì˜ exports í•„ë“œ í™•ì¸
3. Node.js ë²„ì „ í™•ì¸ (18+ í•„ìš”)

## ğŸ› ë¬¸ì œ í•´ê²°

### "Cannot find module 'gemback'"

```bash
npm install ../../gemback-0.4.0.tgz
```

### "Module not found: Error: Package path . is not exported"

`package.json`ì˜ `exports` í•„ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.

### TypeScript ì»´íŒŒì¼ ì—ëŸ¬

```bash
npm run build  # íƒ€ì… ì—ëŸ¬ í™•ì¸
```

íƒ€ì… ì •ì˜ íŒŒì¼ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ì„¸ìš”.

### API ì—ëŸ¬

```bash
# API í‚¤ í™•ì¸
echo $GEMINI_API_KEY

# í‚¤ ë‹¤ì‹œ ì„¤ì •
export GEMINI_API_KEY=your_api_key
```

## ğŸ“ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

ì¶œì‹œ ì „ ë‹¤ìŒ í•­ëª©ë“¤ì„ í™•ì¸í•˜ì„¸ìš”:

### íŒ¨í‚¤ì§€ ë¹Œë“œ
- [ ] `npm run build` ì„±ê³µ
- [ ] `npm pack` ì„±ê³µ
- [ ] dist/ íŒŒì¼ë“¤ ìƒì„±ë¨
- [ ] gemback-0.4.0.tgz ìƒì„±ë¨

### CommonJS í™˜ê²½
- [ ] íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì„±ê³µ
- [ ] require() ë¡œë”© ì„±ê³µ
- [ ] ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼ (API í‚¤ ìˆëŠ” ê²½ìš°)

### ESM í™˜ê²½
- [ ] íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì„±ê³µ
- [ ] import ë¡œë”© ì„±ê³µ
- [ ] ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼ (API í‚¤ ìˆëŠ” ê²½ìš°)

### TypeScript í™˜ê²½
- [ ] íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì„±ê³µ
- [ ] TypeScript ì»´íŒŒì¼ ì„±ê³µ
- [ ] íƒ€ì… ì²´í¬ í†µê³¼
- [ ] ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼ (API í‚¤ ìˆëŠ” ê²½ìš°)

### ê¸°ëŠ¥ ê²€ì¦
- [ ] Phase 1 ê¸°ëŠ¥ (í…ìŠ¤íŠ¸ ìƒì„±, ìŠ¤íŠ¸ë¦¬ë°, ì±„íŒ… ë“±)
- [ ] Phase 2 ê¸°ëŠ¥ (Multi-key, ëª¨ë‹ˆí„°ë§ ë“±)
- [ ] ì—ëŸ¬ í•¸ë“¤ë§
- [ ] í†µê³„ ìˆ˜ì§‘

### ë¬¸ì„œ
- [ ] README.md ì˜ˆì œ ì‹¤í–‰ ê°€ëŠ¥
- [ ] íƒ€ì… ì •ì˜ ë¬¸ì„œí™”
- [ ] ì˜ˆì œ ì½”ë“œ ë™ì‘ í™•ì¸

## ğŸ“– ì¶”ê°€ ë¬¸ì„œ

- **[ìƒì„¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤](./TEST_SCENARIOS.md)**: ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë° ì‹œë‚˜ë¦¬ì˜¤
- **[í”„ë¡œì íŠ¸ README](../README.md)**: ì‚¬ìš©ì ë¬¸ì„œ
- **[CHANGELOG](../CHANGELOG.md)**: ë³€ê²½ ì‚¬í•­ ë¡œê·¸

## ğŸ‰ ì¶œì‹œ ì¤€ë¹„ ì™„ë£Œ ê¸°ì¤€

ë‹¤ìŒ ëª¨ë“  ì¡°ê±´ì´ ì¶©ì¡±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤:

1. âœ… ëª¨ë“  í™˜ê²½(CommonJS, ESM, TypeScript)ì—ì„œ í…ŒìŠ¤íŠ¸ í†µê³¼
2. âœ… Phase 1 & Phase 2 ëª¨ë“  ê¸°ëŠ¥ ë™ì‘ í™•ì¸
3. âœ… íƒ€ì… ì •ì˜ ì™„ë²½
4. âœ… ë¬¸ì„œì™€ ì‹¤ì œ ë™ì‘ ì¼ì¹˜
5. âœ… ì—ëŸ¬ í•¸ë“¤ë§ ì™„ë²½
6. âœ… ì„±ëŠ¥ ì´ìŠˆ ì—†ìŒ

ëª¨ë“  ì¡°ê±´ ì¶©ì¡± ì‹œ **v0.4.0 ì¶œì‹œ ê°€ëŠ¥**! ğŸš€

## ğŸ’¡ íŒ

### ë¹ ë¥¸ ë°˜ë³µ í…ŒìŠ¤íŠ¸

íŒ¨í‚¤ì§€ ìˆ˜ì • í›„ ì¬í…ŒìŠ¤íŠ¸:

```bash
# ë£¨íŠ¸ì—ì„œ
npm run build && npm pack

# í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ
npm install ../../gemback-0.4.0.tgz --force
npm test
```

### API í‚¤ ì—†ì´ êµ¬ì¡°ë§Œ í…ŒìŠ¤íŠ¸

API í‚¤ ì—†ì´ë„ íŒ¨í‚¤ì§€ ë¡œë”©, íƒ€ì… ì²´í¬ ë“±ì€ ê°€ëŠ¥í•©ë‹ˆë‹¤:

```bash
npm test  # API í‚¤ ì—†ì´ ì‹¤í–‰ ê°€ëŠ¥
```

### íŠ¹ì • ê¸°ëŠ¥ë§Œ í…ŒìŠ¤íŠ¸

ê° í…ŒìŠ¤íŠ¸ íŒŒì¼ì„ ì§ì ‘ ì‹¤í–‰í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:

```bash
node index.js  # ê¸°ë³¸ í…ŒìŠ¤íŠ¸ë§Œ
node test-all-features.js  # ì „ì²´ í…ŒìŠ¤íŠ¸
```

---

**Happy Testing! ğŸ§ª**
